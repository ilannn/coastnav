(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,a){},318:function(e,t,a){e.exports=a(531)},323:function(e,t,a){},324:function(e,t,a){},329:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},531:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(20),o=a.n(s),l=(a(323),a(15)),r=a(16),c=a(43),u=a(39),d=a(42),h=a(24),p=a(5),m=a(108),g=(a(324),a(26)),v=a.n(g),f=a(182),y=a(183),b=a(177),E=a.n(b),C=a(2),k=a.n(C),O=(a(327),a(328),Object.freeze({GUIDELINE:Symbol("GUIDELINE"),TB:Symbol("TB"),COG:Symbol("COG"),CRNT:Symbol("CRNT"),TC:Symbol("TC")})),S=a(56),j=a.n(S),w=Object.freeze({FIX:Symbol("FIX"),R:Symbol("R")}),N=Object.freeze({RNG:Symbol("RNG"),DR:Symbol("DR")}),T=["GUIDELINE"],D={percentage:70,position:null,time:new Date,type:N.RNG,length:0},x=function(){function e(){var t=this;Object(l.a)(this,e),this.getSteps=function(e){return[]},this.createNewStep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.GUIDELINE,i={id:++t.id,type:n,positions:[{lat:e,lng:a},{lat:e,lng:a}],marker:{position:null,percentage:50}};return T.includes(n)?i:Object(p.a)({},i,{time:new Date,isAddon:!1,addonData:Object(p.a)({},D)})},this.createNewSnappedItem=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=e.getNearestPosition({lat:a,lng:n},o,s);return O[i.description]?t.createNewStep(l.lat,l.lng,i):t.createNewExtra(l.lat,l.lng,i)},this.createNewExtra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.RNG,i={id:t.id++,type:n,position:{lat:e,lng:a},time:new Date};return n===w.RNG||n===w.R?Object(p.a)({},i,{length:1}):i},this.id=0}return Object(r.a)(e,null,[{key:"getUpdatedStepWithChanges",value:function(t,a,n){var i=(t.marker||n.marker?["positions","marker"]:["positions"]).filter(function(e){return"object"===typeof n[e]?!v.a.isEqual(n[e],t[e]):n[e]!==t[e]});if(!i.length)return t;var s=Object.assign({},t);return i.includes("positions")&&Object.assign(s,{positions:[t.positions[0],e.calcNewEnding(a,n)]}),n.marker&&Object.assign(s,{marker:Object(p.a)({},t.marker)}),s}},{key:"calcNewEnding",value:function(e,t,a){t*=1609.344;var n=j.a.computeDestinationPoint(e,t,a);return new C.LatLng(n.latitude.toFixed(10),n.longitude.toFixed(10))}},{key:"calcNewMarkerPosition",value:function(t,a,n){if(0===n)return t;if(100===n)return a;var i=e.calcAngle(t,a),s=j.a.getDistanceSimple(t,a)*(n/100),o=j.a.computeDestinationPoint(t,s,i);return new C.LatLng(o.latitude.toFixed(15),o.longitude.toFixed(15))}},{key:"isNorth",value:function(e){return(e%=360)<90||e>270}},{key:"getNearestPosition",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;if(t=v.a.flattenDeep(v.a.map(t,function(e){return v.a.flatten(e.positions)})),t=v.a.filter(t,function(e){return v.a.findIndex(a,e)<0}),v.a.isEmpty(t))return e;var s=j.a.findNearest(e,t);return s=isNaN(s.distance)||s.distance/n>i||-1===s.key?e:t[s.key]}}]),e}();x.toMeters=function(e){return 1609.344*e},x.formatCoordinate=function(e){try{return j.a.decimal2sexagesimal(e)}catch(t){console.error(e)}},x.unformatCoordinate=function(e){return j.a.sexagesimal2decimal(e)},x.calcAngle=function(e,t,a){var n=e.lat/180*Math.PI,i=t.lat/180*Math.PI,s=e.lng/180*Math.PI,o=t.lng/180*Math.PI,l=Math.sin(o-s)*Math.cos(i),r=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(o-s);return("inbound"===a?(180*Math.atan2(l,r)/Math.PI+180).toFixed(0):(180*Math.atan2(l,r)/Math.PI+360).toFixed(0))%360},x.calcDistance=function(e,t){var a=j.a.getDistanceSimple(e,t);return{dist:a=j.a.convertUnit("mi",a).toFixed(3),unit:"mi"}};a(329);var I=a(8),M=(a(184),a(66)),A=a(110),L=a(178),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={values:a.getValuesFromProps(a.props)},a.handleCoordinatesChange=function(e){var t=a.state.values.positions?a.state.values.positions:[];try{t[e.target.id][e.target.name]=Number(x.unformatCoordinate(e.target.value))}catch(s){console.warn("User entered wrong coord format: ",e.target.value)}var n=x.calcAngle.apply(x,Object(h.a)(t)),i=Number(x.calcDistance.apply(x,Object(h.a)(t)).dist);a.setState({values:Object(p.a)({},a.state.values,{positions:t,angle:n,length:i})})},a.handleCoordinatesSwitch=function(e){var t=a.state.values.positions.reverse(),n=x.calcAngle.apply(x,Object(h.a)(t));a.setState({values:Object(p.a)({},a.state.values,{positions:t,angle:n})})},a.handleAngleChange=function(e){var t=Number(e.target.value),n=[a.state.values.positions[0],x.calcNewEnding(a.state.values.positions[0],a.state.values.length,t)];a.setState({values:Object(p.a)({},a.state.values,{angle:t,positions:n})})},a.handleLengthChange=function(e){var t=Number(e.target.value),n=[a.state.values.positions[0],x.calcNewEnding(a.state.values.positions[0],t,a.state.values.angle)];a.setState({values:Object(p.a)({},a.state.values,{length:t,positions:n})})},a.handleTypeChange=function(e){var t=e.target.value,n=T.includes(t)?null:a.state.values.time?a.state.values.time:new Date;a.setState({values:Object(p.a)({},a.state.values,{type:t,time:n})})},a.handleMarkerChange=function(e,t){var n=Number(t);a.setState({values:Object(p.a)({},a.state.values,{marker:n})})},a.handleTimeChange=function(e){var t=e.toDate();a.setState({values:Object(p.a)({},a.state.values,{time:t})})},a.handleAddonMarkerChange=function(e,t){var n=Number(t),i=a.getAddonLength(n),s=Object(p.a)({},a.state.values.addonData,{percentage:n,length:i});a.setState({values:Object(p.a)({},a.state.values,{addonData:s})})},a.handleAddonTimeChange=function(e){var t=e.toDate(),n=Object(p.a)({},a.state.values.addonData,{time:t});a.setState({values:Object(p.a)({},a.state.values,{addonData:n})})},a.handleAddonTypeChange=function(e){var t=e.target.value,n=Object(p.a)({},a.state.values.addonData,{type:t});a.setState({values:Object(p.a)({},a.state.values,{addonData:n})})},a.handleAddonLangthChange=function(e){var t=Number(e.target.value);t>a.state.values.length&&(t=a.state.values.length),t<0&&(t=0);var n=a.state.values.length?t/a.state.values.length*100:0,i=Object(p.a)({},a.state.values.addonData,{length:t,percentage:n});a.setState({values:Object(p.a)({},a.state.values,{addonData:i})})},a.handleAddonSwitch=function(e){a.setState({values:Object(p.a)({},a.state.values,{isAddon:!a.state.values.isAddon})})},a.getUpdatedMarker=function(e,t){return e||(e=a.state.values.positions),t||0===t||(t=a.state.values.marker?a.state.values.marker:50),{position:x.calcNewMarkerPosition(e[0],e[1],t),percentage:t}},a.handleSubmit=function(e){e.preventDefault();var t=Object(p.a)({},a.state.values);t.type=O[t.type],t.marker=a.getUpdatedMarker(t.positions,t.marker),t.addonData&&(t.addonData=a.handleAddonSubmit(t)),a.props.onSave(t)},a.handleAddonSubmit=function(e){var t=N[e.addonData.type];return console.log(e.positions,e.addonData.percentage),console.log("getUpdatedMarker",a.getUpdatedMarker(e.positions,e.addonData.percentage)),Object(p.a)({},e.addonData,{type:t},a.getUpdatedMarker(e.positions,e.addonData.percentage))},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"getValuesFromProps",value:function(e){return{positions:e.positions,type:e.type.description,angle:x.calcAngle.apply(null,e.positions),length:Number(x.calcDistance.apply(null,e.positions).dist),marker:e.marker?e.marker.percentage:50,time:e.time,isAddon:e.isAddon,addonData:this.getAddonValues(e)}}},{key:"getAddonValues",value:function(e){var t=e.addonData.type?e.addonData.type:D.type;t=t.description;var a=Object(p.a)({},D,e.addonData,{type:t}),n=this.getAddonLength(a.percentage,e.positions);return Object(p.a)({},a,{length:n})}},{key:"getStepLength",value:function(e){return this.state&&this.state.values&&this.state.values.length?this.state.values.length:Number(x.calcDistance.apply(null,e).dist)}},{key:"getAddonLength",value:function(e,t){var a=this.getStepLength(t)*(e/100);return Number(a.toFixed(3))}},{key:"componentDidUpdate",value:function(e){this.props.id===e.id&&v.a.isEqual(this.props.marker,e.marker)&&v.a.isEqual(this.props.addonData,e.addonData)&&this.props.positions===e.positions||this.setState(Object(p.a)({},this.state,{values:this.getValuesFromProps(this.props)}))}},{key:"render",value:function(){return i.a.createElement("form",{className:"container",onSubmit:this.handleSubmit},i.a.createElement(R,{title:"From",id:"0",value:this.state.values.positions[0],handleChange:this.handleCoordinatesChange},i.a.createElement(I.a,{onClick:this.handleCoordinatesSwitch},i.a.createElement("i",{className:"material-icons",style:{transform:"rotate(90deg)",display:"block"}},"compare_arrows"))),i.a.createElement(R,{title:"To",id:"1",value:this.state.values.positions[1],handleChange:this.handleCoordinatesChange}),i.a.createElement(G,{title:"Type",value:this.state.values.type,handleChange:this.handleTypeChange}),i.a.createElement(P,{title:"Degree",value:this.state.values.angle,handleChange:this.handleAngleChange}),i.a.createElement(U,{title:"Distance",value:this.state.values.length,handleChange:this.handleLengthChange}),this.state.values.time&&i.a.createElement(B,{title:"Time",value:this.state.values.time,handleChange:this.handleTimeChange}),this.state.values.marker&&i.a.createElement(z,{title:"Marker",value:this.state.values.marker,handleChange:this.handleMarkerChange}),i.a.createElement(I.c,null),i.a.createElement(H,{title:"Addon",value:this.state.values.isAddon,handleChange:this.handleAddonSwitch}),this.state.values.isAddon&&i.a.createElement(V,{value:this.state.values.addonData,handlePositionChange:this.handleAddonMarkerChange,handleTimeChange:this.handleAddonTimeChange,handleTypeChange:this.handleAddonTypeChange,handleLengthChange:this.handleAddonLangthChange}),i.a.createElement(I.c,null),i.a.createElement("div",{className:"footerButtons"},i.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Save"),i.a.createElement(I.a,{onClick:this.props.onDelete,variant:"contained"},"Delete")))}}]),t}(n.PureComponent),R=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement("span",null,i.a.createElement(I.e,{style:{display:"block"},htmlFor:e.name},e.title),e.children),i.a.createElement("span",null,i.a.createElement(I.d,{className:"form-input",id:e.id,name:"lat",type:"string",value:x.formatCoordinate(e.value.lat),onChange:e.handleChange,placeholder:"Lat"}),i.a.createElement(I.d,{className:"form-input",id:e.id,name:"lng",type:"string",value:x.formatCoordinate(e.value.lng),onChange:e.handleChange,placeholder:"Lng"})))},P=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.d,{className:"form-input",type:"number",value:e.value,onChange:e.handleChange,placeholder:"\xb0"}))},U=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.d,{className:"form-input",type:"number",value:e.value,onChange:e.handleChange,placeholder:"length"}))},G=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.g,{value:e.value,onChange:e.handleChange,inputProps:{name:"type",id:"type"}},i.a.createElement(I.f,{value:"GUIDELINE"},"Guide Line"),i.a.createElement(I.f,{value:"TB"},"TB"),i.a.createElement(I.f,{value:"COG"},"COG"),i.a.createElement(I.f,{value:"CRNT"},"Current"),i.a.createElement(I.f,{value:"TC"},"TC")))},z=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(L.a,{className:"form-input",type:"number",value:e.value,onChange:e.handleChange}))},B=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(M.a,{utils:A.a},i.a.createElement(M.b,{className:"form-input",ampm:!1,value:e.value,onChange:e.handleChange})))},H=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.h,{className:"form-input",title:e.value?"Remove Addon":"Add Addon",checked:e.value,onChange:e.handleChange}))},V=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},"Type"),i.a.createElement(I.g,{value:e.value.type,onChange:e.handleTypeChange,inputProps:{name:"type",id:"type"}},i.a.createElement(I.f,{value:"RNG"},"Range"),i.a.createElement(I.f,{value:"DR"},"D.R")),i.a.createElement(I.e,{htmlFor:e.name},"Time"),i.a.createElement(M.a,{utils:A.a},i.a.createElement(M.b,{className:"form-input",ampm:!1,value:e.value.time,onChange:e.handleTimeChange})),i.a.createElement(I.e,{htmlFor:e.name},"Position"),i.a.createElement(L.a,{className:"form-input",type:"number",value:e.value.percentage,onChange:e.handlePositionChange}),"RNG"===e.value.type&&i.a.createElement(I.e,{htmlFor:e.name}," Range Length"),"RNG"===e.value.type&&i.a.createElement(I.d,{className:"form-input",type:"number",value:e.value.length,onChange:e.handleLengthChange,placeholder:"Range length"}))},Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={values:{position:a.props.position,type:a.props.type.description,length:a.props.length,time:a.props.time}},a.handleCoordinatesChange=function(e){var t=a.state.values.position;try{t[e.target.name]=Number(x.unformatCoordinate(e.target.value))}catch(n){console.warn("User entered wrong coord format: ",e.target.value)}a.setState({values:Object(p.a)({},a.state.values,{position:t})})},a.handleLengthChange=function(e){var t=Number(e.target.value);a.setState({values:Object(p.a)({},a.state.values,{length:t})})},a.handleTypeChange=function(e){var t,n=e.target.value;t="RNG"===n||"R"===n?a.state.values.length?a.state.values.length:-1:null,a.setState({values:Object(p.a)({},a.state.values,{type:n,length:t})})},a.handleTimeChange=function(e){var t=e.toDate();a.setState({values:Object(p.a)({},a.state.values,{time:t})})},a.handleSubmit=function(e){e.preventDefault();var t=Object(p.a)({},a.state.values);t.type=w[t.type],a.props.onSave(t)},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.id!==e.id||this.props.length!==e.length||this.props.position!==e.position){var t=this.props.position,a=this.props.length,n=this.props.type.description,i=this.props.time;this.setState(Object(p.a)({},this.state,{values:{position:t,length:a,type:n,time:i}}))}}},{key:"render",value:function(){return i.a.createElement("form",{className:"container",onSubmit:this.handleSubmit},i.a.createElement(_,{title:"Position",value:this.state.values.position,handleChange:this.handleCoordinatesChange}),i.a.createElement(W,{title:"Type",value:this.state.values.type,handleChange:this.handleTypeChange}),i.a.createElement(q,{title:"Time",value:this.state.values.time,handleChange:this.handleTimeChange}),(this.state.values.length||0===this.state.values.length)&&i.a.createElement(X,{title:"Length",value:this.state.values.length,handleChange:this.handleLengthChange}),i.a.createElement("div",{className:"footerButtons"},i.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Save"),i.a.createElement(I.a,{onClick:this.props.onDelete,variant:"contained"},"Delete")))}}]),t}(n.PureComponent),_=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement("span",null,i.a.createElement(I.d,{className:"form-input",id:e.id,name:"lat",type:"string",value:x.formatCoordinate(e.value.lat),onChange:e.handleChange,placeholder:"Lat"}),i.a.createElement(I.d,{className:"form-input",id:e.id,name:"lng",type:"string",value:x.formatCoordinate(e.value.lng),onChange:e.handleChange,placeholder:"Lng"})))},X=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.d,{className:"form-input",type:"number",value:e.value,onChange:e.handleChange,placeholder:"length"}))},W=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(I.g,{value:e.value,onChange:e.handleChange,inputProps:{name:"type",id:"type"}},i.a.createElement(I.f,{value:"FIX"},"Fix"),i.a.createElement(I.f,{value:"R"},"Radius")))},q=function(e){return i.a.createElement("div",{className:"form-group"},i.a.createElement(I.e,{htmlFor:e.name},e.title),i.a.createElement(M.a,{utils:A.a},i.a.createElement(M.b,{className:"form-input",ampm:!1,value:e.value,onChange:e.handleChange})))},J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={values:{}},a.onSave=function(e){a.props.onSave(e)},a.onDelete=function(){a.props.onDelete(a.props.item.id)},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e;return this.props.item&&(e=O[this.props.item.type.description]?i.a.createElement(I.b,{className:"EditorCard"},i.a.createElement(F,Object.assign({key:this.props.id,onSave:this.onSave,onDelete:this.onDelete},this.props.item))):i.a.createElement(I.b,{className:"EditorCard"},i.a.createElement(Z,Object.assign({key:this.props.id,onSave:this.onSave,onDelete:this.onDelete},this.props.item)))),i.a.createElement("section",{className:"EditorContainer"},e)}}]),t}(n.Component),K=(a(502),[{type:O.GUIDELINE,acronyms:"GL",matIcon:"face",options:{color:"grey",dashArray:"4"}},{type:O.TB,acronyms:"TB",matIcon:"face",options:{}},{type:O.COG,acronyms:"COG",matIcon:"face",options:{color:"black"}},{type:O.CRNT,acronyms:"CRNT",matIcon:"face",options:{color:"white"}},{type:O.TC,acronyms:"TC",matIcon:"face",options:{color:"white"}}]),$=[{type:w.FIX,acronyms:"FIX",matIcon:"face",options:{}},{type:w.R,acronyms:"R",matIcon:"face",options:{}}],Q=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.getDrawkitTools(K),t=this.getDrawkitTools($);return i.a.createElement("section",null,i.a.createElement(I.b,{className:"drawkitToolList"},e),i.a.createElement(I.b,{className:"drawkitToolList"},t),i.a.createElement(I.b,{className:"drawkitToolList drawkitClearAll"},i.a.createElement(I.a,{title:"Clear All",onClick:this.props.onClearAll},i.a.createElement("i",{className:"material-icons"},"delete_sweep"))),this.props.children)}},{key:"getDrawkitTools",value:function(e){var t=this;return e.map(function(e,a){var n=t.props.selectedTool&&t.props.selectedTool.type===e.type?"selected":"",s=a!==K.length-1?i.a.createElement(I.c,null):null;return i.a.createElement("span",{key:a},i.a.createElement(I.a,{className:"drawkitTool draw-".concat(e.acronyms.toLocaleLowerCase()," ").concat(n),title:"Draw ".concat(e.acronyms),variant:t.props.selectedTool&&t.props.selectedTool.type===e.type?"contained":"text",onClick:function(){t.onSelectTool(e)}},e.acronyms),s)})}},{key:"onSelectTool",value:function(e){this.props.onSelectTool(e)}}]),t}(n.Component),Y=a(40),ee=k.a.icon({iconUrl:"arch.png",iconSize:[120,40],iconAnchor:[60,10]}),te=k.a.icon({iconUrl:"point.png",iconSize:[50,50],iconAnchor:[25,25]}),ae={icon:ee},ne=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=t.time?Y(t.time).format("HH:mm"):"Error",n=t.length||0===t.length?t.length:0,i=k.a.marker(t.position,Object(p.a)({},ae,{rotationAngle:t.angle})).addTo(e);return i.bindTooltip("".concat(a," / ").concat(n," M"),{permanent:!0,offset:[0,10*+x.isNorth(t.angle)]}),i}}]),e}(),ie={icon:ee},se=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.marker(t.position,Object(p.a)({},ie,{rotationAngle:t.angle})).addTo(e),n=t.time?Y(t.time).format("HH:mm"):"Error";return a.bindTooltip("".concat(n),{permanent:!0,offset:[0,10*+x.isNorth(t.angle)]}),a}}]),e}(),oe=k.a.icon({iconUrl:"empty.png",iconSize:[10,10],iconAnchor:[5,5]}),le=k.a.icon({iconUrl:"single.png",iconSize:[40,40],iconAnchor:[20,20]}),re=k.a.icon({iconUrl:"double.png",iconSize:[40,40],iconAnchor:[20,20]}),ce=k.a.icon({iconUrl:"triple.png",iconSize:[40,40],iconAnchor:[20,20]}),ue=function(e,t){if(t.isAddon)switch(t.addonData.type.description){case N.RNG.description:return ne.addTo(e,Object(p.a)({},t.addonData,{angle:t.angle}));case N.DR.description:default:return se.addTo(e,Object(p.a)({},t.addonData,{angle:t.angle}))}},de={color:"grey",dashArray:"4"},he={icon:oe},pe=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.polyline(t.positions,Object(p.a)({},de)).addTo(e),n=Object(p.a)({},x.calcDistance.apply(x,Object(h.a)(Object.values(a.getLatLngs())))),i=n.dist,s=n.unit,o=x.calcAngle.apply(x,Object(h.a)(Object.values(a.getLatLngs()))),l=t.marker&&t.marker.position?t.marker.position:a.getCenter(),r=k.a.marker(l,Object(p.a)({},he)).addTo(e);r.bindTooltip("".concat(o,"\xb0 / ").concat(i," ").concat(s),{permanent:!0});var c=ue(e,t);return c?[a,r,c]:[a,r]}}]),e}(),me={color:"black",width:8},ge={icon:le},ve=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.polyline(t.positions,Object(p.a)({},me)).addTo(e),n=t.marker&&t.marker.position?t.marker.position:a.getCenter(),i=k.a.marker(n,Object(p.a)({},ge,{rotationAngle:x.calcAngle.apply(null,t.positions)})).addTo(e),s=x.calcAngle.apply(x,Object(h.a)(Object.values(a.getLatLngs()))),o=t.time?Y(t.time).format("HH:mm"):"Error";i.bindTooltip("".concat(s,"\xb0 / ").concat(o),{permanent:!0,offset:[0,5*+x.isNorth(s)]});var l=ue(e,t);return l?[a,i,l]:[a,i]}}]),e}(),fe={color:"black",width:8},ye={icon:re},be=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.polyline(t.positions,Object(p.a)({},fe)).addTo(e),n=t.marker&&t.marker.position?t.marker.position:a.getCenter(),i=k.a.marker(n,Object(p.a)({},ye,{rotationAngle:x.calcAngle.apply(null,t.positions)})).addTo(e),s=Object(p.a)({},x.calcDistance.apply(x,Object(h.a)(Object.values(a.getLatLngs())))),o=s.dist,l=s.unit,r=x.calcAngle.apply(x,Object(h.a)(Object.values(a.getLatLngs())));i.bindTooltip("".concat(r,"\xb0 / ").concat(o," ").concat(l),{permanent:!0,offset:[0,15*+x.isNorth(r)]});var c=ue(e,t);return c?[a,i,c]:[a,i]}}]),e}(),Ee={color:"black",width:8},Ce={icon:ce},ke=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.polyline(t.positions,Object(p.a)({},Ee)).addTo(e),n=t.marker&&t.marker.position?t.marker.position:a.getCenter(),i=k.a.marker(n,Object(p.a)({},Ce,{rotationAngle:x.calcAngle.apply(null,t.positions)})).addTo(e),s=Object(p.a)({},x.calcDistance.apply(x,Object(h.a)(Object.values(a.getLatLngs())))),o=s.dist,l=s.unit,r=x.calcAngle.apply(x,Object(h.a)(Object.values(a.getLatLngs())));i.bindTooltip("".concat(r,"\xb0 / ").concat(o," ").concat(l),{permanent:!0,offset:[0,15*+x.isNorth(r)]});var c=ue(e,t);return c?[a,i,c]:[a,i]}}]),e}(),Oe={color:"black",width:8},Se={icon:re},je=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.polyline(t.positions,Object(p.a)({},Oe)).addTo(e),n=t.marker&&t.marker.position?t.marker.position:a.getCenter(),i=k.a.marker(n,Object(p.a)({},Se,{rotationAngle:x.calcAngle.apply(null,t.positions)})).addTo(e),s=Object(p.a)({},x.calcDistance.apply(x,Object(h.a)(Object.values(a.getLatLngs())))),o=s.dist,l=s.unit,r=x.calcAngle.apply(x,Object(h.a)(Object.values(a.getLatLngs())));i.bindTooltip("".concat(r,"\xb0 / ").concat(o," ").concat(l),{permanent:!0,offset:[0,15*+x.isNorth(r)]});var c=ue(e,t);return c?[a,i,c]:[a,i]}}]),e}(),we={icon:te},Ne=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=k.a.marker(t.position,Object(p.a)({},we)).addTo(e),n=t.time?Y(t.time).format("HH:mm"):"Error";return a.bindTooltip("".concat(n),{permanent:!0,offset:[5,0]}),[a]}}]),e}(),Te=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"addTo",value:function(e,t){var a=t.time?Y(t.time).format("HH:mm"):"Error",n=t.length?t.length:0,i=x.toMeters(n),s=k.a.circle(t.position,{radius:i}).addTo(e);return s.bindTooltip("".concat(a," / ").concat(n," M"),{permanent:!0,offset:[5,0]}),[s]}}]),e}(),De=new x,xe=[32.8201719,34.6261597],Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).leafletMap=null,a.leafletSteps={},a.leafletExtras={},a.state={steps:De.getSteps(),extras:[],selectedItem:void 0,selectedTool:null,draw:{isDrawing:!1,snapping:!0}},a.setLeafletMapRef=function(e){return a.leafletMap=e&&e.leafletElement},a.onSnappingSwitch=function(e){a.setState({draw:Object(p.a)({},a.state.draw,{snapping:!a.state.draw.snapping})})},a.onSelectTool=function(e){a.state.selectedTool&&a.state.selectedTool.type===e.type?a.setState({selectedTool:null}):a.setState({selectedTool:e})},a.onClearAll=function(){a.eraseExtras(),a.eraseSteps(),a.unSelectItem(),a.setState({steps:[],extras:[]})},a.eraseExtras=function(){a.eraseItems(a.leafletExtras)},a.eraseSteps=function(){a.eraseItems(a.leafletSteps)},a.escFunction=a.escFunction.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),this.leafletMap.on("click",this.onMapClick.bind(this)),this.setMousePosition(),this.drawStateSteps()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"componentDidUpdate",value:function(e,t){this.drawStateSteps(),this.drawStateExtras()}},{key:"render",value:function(){return i.a.createElement("section",{className:"MapViewContainer"},i.a.createElement(f.a,{id:"map",key:"mymap",ref:this.setLeafletMapRef,center:xe,zoom:11,zoomControl:!1,maxZoom:15,minZoom:9,animate:!0,onMouseMove:this.onDrawingMove.bind(this)},i.a.createElement(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"full/{z}/{x}/{y}.png"}),i.a.createElement(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"haifa/{z}/{x}/{y}.png",minZoom:12}),i.a.createElement(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"kishon/{z}/{x}/{y}.png",minZoom:15}),i.a.createElement(y.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"hadera/{z}/{x}/{y}.png",minZoom:12}),i.a.createElement(E.a,{position:"topright"},i.a.createElement("img",{src:"/icon.png",alt:"",width:"100px"}),i.a.createElement(Q,{selectedTool:this.state.selectedTool,onSelectTool:this.onSelectTool,onClearAll:this.onClearAll},i.a.createElement(I.b,null,this.state.draw.snapping?i.a.createElement("i",{className:"material-icons"},"lock"):i.a.createElement("i",{className:"material-icons"},"lock_open"),i.a.createElement(I.h,{title:this.state.draw.snapping?"Snapping On":"Snapping Off",checked:this.state.draw.snapping,onChange:this.onSnappingSwitch})))),i.a.createElement(E.a,{position:"topleft"},i.a.createElement(J,{item:this.state.selectedItem,onStepChange:this.state.editorOnChange,onSave:this.handleSelectedItemChanges.bind(this),onDelete:this.handleEditorDelete.bind(this)}))))}},{key:"setMousePosition",value:function(){this.leafletMap?k.a.control.mousePosition({position:"bottomright",lngFormatter:x.formatCoordinate,latFormatter:x.formatCoordinate}).addTo(this.leafletMap):console.error("Couldn't add lines to map. Missing map ref")}},{key:"drawStateExtras",value:function(){this.state.extras&&(this.leafletMap?this.drawExtras(this.state.extras):console.error("Couldn't draw extras on map. Missing map ref"))}},{key:"drawExtras",value:function(e){var t=this;this.eraseExtras(),e.forEach(function(e){t.leafletExtras[e.id]=t._createNewExtra(e),v.a.each(t.leafletExtras[e.id],t.extraOnClickListener.bind(t))})}},{key:"_createNewExtra",value:function(e){switch(e.type){case w.FIX:return Ne.addTo(this.leafletMap,e);case w.R:default:return Te.addTo(this.leafletMap,e)}}},{key:"extraOnClickListener",value:function(e){e.on("click",this.extraOnClick.bind(this))}},{key:"extraOnClick",value:function(e){this.itemOnClick(e,this.state.extras,this.leafletExtras)}},{key:"drawStateSteps",value:function(){this.state.steps&&(this.leafletMap?this.drawSteps(this.state.steps):console.error("Couldn't add lines to map. Missing map ref"))}},{key:"drawSteps",value:function(e){var t=this;this.eraseSteps(),e.forEach(function(e){t.leafletSteps[e.id]=t._createNewStep(e),t.leafletSteps[e.id].map(t.stepOnClickListener.bind(t))})}},{key:"_createNewStep",value:function(e){switch(e.type){case O.TB:return ve.addTo(this.leafletMap,e);case O.COG:return be.addTo(this.leafletMap,e);case O.CRNT:return ke.addTo(this.leafletMap,e);case O.TC:return je.addTo(this.leafletMap,e);case O.GUIDELINE:default:return pe.addTo(this.leafletMap,e)}}},{key:"stepOnClickListener",value:function(e){e.on("click",this.stepOnClick.bind(this))}},{key:"stepOnClick",value:function(e){this.itemOnClick(e,this.state.steps,this.leafletSteps)}},{key:"itemOnClick",value:function(e,t,a){if(e.originalEvent.view.L.DomEvent.stopPropagation(e),this.state.draw.isDrawing||!this.state.draw.isDrawing&&this.state.selectedTool)this.onMapClick(e);else{var n=+v.a.findKey(a,function(t){return t.indexOf(e.target)>=0});n&&(this.state.selectedItem&&n===this.state.selectedItem.id?this.unSelectItem():this.selectItem(v.a.find(t,{id:n})))}}},{key:"selectItem",value:function(e){this.setState({selectedItem:e})}},{key:"unSelectItem",value:function(){this.setState({selectedItem:void 0})}},{key:"eraseItems",value:function(e){var t=this;this.leafletMap?v.a.mapValues(e,function(e){v.a.each(e,function(e){return t.leafletMap.removeLayer(e)})}):console.error("Couldn't erase items from map. Missing map ref")}},{key:"escFunction",value:function(e){27===e.keyCode&&this.handleEscPress()}},{key:"handleEscPress",value:function(){this.state.selectedTool&&(O[this.state.selectedTool.type.description]?this.handleStepEsc():this.handleExtrasEsc()),this.setState({selectedItem:void 0,draw:Object(p.a)({},this.state.draw,{isDrawing:!1})})}},{key:"handleStepEsc",value:function(){var e=[];if(this.state.draw.isDrawing){var t=this.state.selectedItem;e=Object(h.a)(this.state.steps),v.a.remove(e,function(e){return e.id===t.id})}else e=this.state.steps;this.setState({steps:e})}},{key:"handleExtrasEsc",value:function(){var e=[];if(this.state.draw.isDrawing){var t=this.state.selectedItem;e=Object(h.a)(this.state.extras),v.a.remove(e,function(e){return e.id===t.id})}else e=this.state.extras;this.setState({extras:e})}},{key:"onDrawingMove",value:function(e){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),this.state.draw.isDrawing&&(O[this.state.selectedTool.type.description]?this.handleStepDrawing(e):this.hendleExtrasDrawing(e))}},{key:"handleStepDrawing",value:function(e){var t=this,a=this.state.steps,n=a.find(function(e){return e.id===t.state.selectedItem.id});n=Object.assign(n,{positions:[n.positions[0],{lat:Number(e.latlng.lat.toFixed(15)),lng:Number(e.latlng.lng.toFixed(15))}]}),this.setState({steps:a,selectedItem:n})}},{key:"hendleExtrasDrawing",value:function(e){var t=this,a=this.state.extras,n=a.find(function(e){return e.id===t.state.selectedItem.id});if(n.type===w.R){var i=e.latlng.distanceTo(n.position),s=x.calcDistance(n.position,e.latlng).dist;n=Object.assign(n,{radius:i,length:s})}else{var o={lat:Number(e.latlng.lat.toFixed(15)),lng:Number(e.latlng.lng.toFixed(15))};this.state.draw.snapping&&(o=x.getNearestPosition(o,this.state.steps)),n=Object.assign(n,{position:o})}this.setState({extras:a,selectedItem:n})}},{key:"onMapClick",value:function(e){e.originalEvent.preventDefault(),this.state.selectedTool&&(this.state.draw.isDrawing?(O[this.state.selectedTool.type.description]?this.handleStepStopDraw(e):this.handleExtrasStopDraw(e),this.setState({draw:Object(p.a)({},this.state.draw,{isDrawing:!1})})):O[this.state.selectedTool.type.description]?this.handleStepStartDraw(e):this.handleExtrasDraw(e))}},{key:"handleStepStartDraw",value:function(e){var t;t=this.state.draw.snapping?De.createNewSnappedItem(Number(e.latlng.lat.toFixed(15)),Number(e.latlng.lng.toFixed(15)),this.state.selectedTool.type,this.leafletMap.getZoom(),this.state.steps):De.createNewStep(Number(e.latlng.lat.toFixed(15)),Number(e.latlng.lng.toFixed(15)),this.state.selectedTool.type),Object.assign(t,this.state.selectedTool.options);var a=[].concat(Object(h.a)(this.state.steps),[t]);this.setState({draw:Object(p.a)({},this.state.draw,{isDrawing:!0}),steps:a,selectedItem:t})}},{key:"handleExtrasDraw",value:function(e){var t;t=this.state.draw.snapping?De.createNewSnappedItem(Number(e.latlng.lat.toFixed(15)),Number(e.latlng.lng.toFixed(15)),this.state.selectedTool.type,this.leafletMap.getZoom(),this.state.steps):De.createNewExtra(Number(e.latlng.lat.toFixed(15)),Number(e.latlng.lng.toFixed(15)),this.state.selectedTool.type),Object.assign(t,this.state.selectedTool.options);var a=[].concat(Object(h.a)(this.state.extras),[t]);this.setState({draw:Object(p.a)({},this.state.draw,{isDrawing:!0}),extras:a,selectedItem:t})}},{key:"handleStepStopDraw",value:function(e){if(this.state.draw.snapping){var t=this.state.selectedItem.positions,a=x.getNearestPosition(t[1],this.state.steps.slice(0,this.state.steps.length-1),[t[0]]);this.handleSelectedItemChanges({positions:[t[0],a]})}}},{key:"handleExtrasStopDraw",value:function(e){}},{key:"handleRemoveStep",value:function(e){var t=this.state.selectedItem,a=O[t.type.description]?"steps":"extras",n=this.state[a],i=v.a.filter(n,function(t){return t.id!==e}),s={selectedItem:this.state.selectedItem.id!==e?this.state.selectedItem:null};s[a]=i,this.setState(s)}},{key:"handleSelectedItemChanges",value:function(e){var t=this.state.selectedItem,a=O[t.type.description]?"steps":"extras",n=this.state[a],i=v.a.find(n,{id:t.id});i&&Object.assign(i,e);var s={selectedItem:i};s[a]=n,this.setState(s)}},{key:"handleEditorDelete",value:function(e){this.handleRemoveStep(e)}}]),t}(n.Component),Me=a(112),Ae=a.n(Me),Le=(a(503),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={isInitial:!1},a.handleClose=function(){a.setState({isInitial:!1})},a.handleShow=function(){a.setState({isInitial:!0})},a.escFunction=function(e){27===e.keyCode&&a.handleClose()},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1),this.handleShow()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(Ie,null),i.a.createElement(Ae.a,{show:this.state.isInitial,onHide:this.handleClose},i.a.createElement(Ae.a.Header,{closeButton:!0},i.a.createElement(Ae.a.Title,{className:"initialModalTitle"},"Ahoy Captain!")),i.a.createElement(Ae.a.Body,{className:"initialModalBody"},i.a.createElement("img",{src:"/icon.png",alt:"",width:"300rem"}),i.a.createElement("p",null,"Press ",i.a.createElement("b",null,"Esc")," to start"))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[318,1,2]]]);
//# sourceMappingURL=main.e9fcc7e3.chunk.js.map